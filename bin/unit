#!/bin/bash
conf_dir=/usr/local/service/etc
work_dir=/usr/local/service
echo [Unit]
echo Description=%n

echo [Service]

echo EnvironmentFile=$conf_dir/nodes.env
echo EnvironmentFile=$conf_dir/components.env
echo EnvironmentFile=$conf_dir/cluster.env
echo EnvironmentFile=$conf_dir/secret.env
echo EnvironmentFile=$work_dir/%n.env
echo ExecStartPre=-/bin/docker kill %n
echo ExecStartPre=-/bin/docker rm %n
echo ExecStart=/bin/docker run \\
echo --name %n \\
echo \${IMAGE_NAME}:\${TAG} \\
echo "/bin/ping www.baidu.com"
echo ExecStop=-/bin/docker stop %n
echo Restart=on-failure
echo RestartSec=1s
echo TimeoutStartSec=120
echo TimeoutStopSec=30
